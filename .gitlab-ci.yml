---
image: golang:1.6

stages:
- test
- build

before_script:
- GODIR=$GOPATH/src/gitlab.com/tmaczukin/goligen
- mkdir -p "$(dirname $GODIR)"
- ln -sfv "$(pwd -P)" "$GODIR"
- cd "$GODIR"

.docker: &docker
  stage: test
  tags:
  - docker

licenses_check:
  <<: *docker
  script:
  - make license

statis_analysis:
  <<: *docker
  script:
  - make lint fmt vet complexity

build:
  <<: *docker
  stage: build
  script:
  - make build_all
