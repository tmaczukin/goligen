---
image: golang:1.6

stages:
- test
- build

.docker: &docker
  stage: test
  before_script:
  - source ci/prepare.sh
  - make deps
  tags:
  - docker

licenses_check:
  <<: *docker
  script:
  - make license

unit_tests:
  <<: *docker
  script:
  - make test

statis_analysis:
  <<: *docker
  script:
  - make lint fmt vet complexity

build:
  <<: *docker
  stage: build
  script:
  - make build build_all
